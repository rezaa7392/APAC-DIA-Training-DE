version: 2

models:
  - name: stg_orders_header
    config:
      contract:
        enforced: true
    columns:
      - name: order_id
        data_type: BIGINT
        tests: [not_null, unique]

      - name: customer_id
        data_type: BIGINT
        tests:
          - relationships:
              to: ref('stg_customers')
              field: customer_id

      - name: store_id
        data_type: BIGINT
        tests:
          - relationships:
              to: ref('stg_stores')
              field: store_id

      - name: order_ts
        data_type: TIMESTAMP

      - name: order_dt_local
        data_type: DATE

      - name: channel
        data_type: VARCHAR

      - name: payment_method
        data_type: VARCHAR

      - name: coupon_code
        data_type: VARCHAR

      - name: shipping_fee
        data_type: DECIMAL(18,2)

      - name: currency
        data_type: VARCHAR

      - name: ingestion_ts
        data_type: TIMESTAMP
      - name: src_filename
        data_type: VARCHAR
      - name: src_row_hash
        data_type: VARCHAR
