version: 2

models:
  - name: dim_date
    description: "A comprehensive date dimension table used for all time-based analysis."
    config:
      contract:
        enforced: true
    columns:
      - name: date
        description: "The primary key for the date dimension."
        data_type: date
        tests: [unique, not_null]

      - name: year
        description: "The calendar year."
        data_type: integer
        
      - name: month_of_year
        description: "The month number (1-12)."
        data_type: integer

      - name: day_of_year
        description: "The day number of the year."
        data_type: integer
        
      - name: day_of_month
        description: "The day number of the month."
        data_type: integer
        
      - name: week_of_year
        description: "The calendar week number of the year."
        data_type: integer

      - name: day_of_week
        description: "The day number of the week (1=Sunday, 7=Saturday)."
        data_type: integer
        
      - name: is_weekend
        description: "A boolean flag indicating if the date is a weekend."
        data_type: boolean
        tests:
          - accepted_values:
              arguments:
                values: [true, false]

      - name: fiscal_year
        description: "The fiscal year based on a July 1st start date."
        data_type: BIGINT

      - name: fiscal_quarter
        description: "The fiscal quarter (Q1, Q2, Q3, Q4)."
        data_type: varchar
        tests:
          - accepted_values:
              arguments:
                values: ['Q1', 'Q2', 'Q3', 'Q4']

      - name: quarter_start_date
        description: "The first day of the calendar quarter."
        data_type: date

      - name: quarter_end_date
        description: "The last day of the calendar quarter."
        data_type: date

      - name: iso_year
        description: "The ISO week-numbering year."
        data_type: integer
      
      - name: iso_week_of_year
        description: "The ISO week number of the year (1-53)."
        data_type: integer

      - name: is_holiday
        description: "A boolean flag indicating if the date is a holiday."
        data_type: boolean
        tests:
          - accepted_values:
              arguments:
                values: [true, false]


      
      - name: holiday_name
        description: "The name of the holiday, if applicable."
        data_type: varchar
        
      - name: holiday_country_code
        description: "The country code for the holiday (e.g., AU, US, UK)."
        data_type: varchar